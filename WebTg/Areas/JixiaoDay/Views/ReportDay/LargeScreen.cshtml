
@{
    Layout = null;
}
@using WeiCode.Utility;
@using WeiCode.DataBase;
@using WeiCode.Services;

@using WeiCode.ModelDbs;
@using Services.Project;
@using WeiCode.Domain;
@{
    var listToday = DoMySql.FindList<ModelDb.p_jixiao_day>($"tg_user_sn='{new UserIdentityBag().user_sn}' and c_date='{DateTime.Today}' order by new_num desc");

    var listMonth = DoMySql.FindListBySql<ServiceFactory.JixiaoTable>($"select sum(amount) as amount_sum,sum(new_num) as new_num_sum,zb_user_sn from p_jixiao_day where c_date>='{DateTime.Today.ToString("yyyy-MM-01")}' and c_date<='{DateTime.Today.AddMonths(1).ToString("yyyy-MM-01").ToDate().AddDays(-1).ToString("yyyy-MM-dd")}' and tg_user_sn='{new UserIdentityBag().user_sn}' group by zb_user_sn order by new_num");
}

<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>企业营收大数据统计html页面图表</title>
    <script>
        var t_month = "@(ViewBag.t_month)";
    </script>
    <script src="~/TgScreen/Scripts/jquery-2.1.4.js"></script>
    <script src="~/TgScreen/Scripts/echarts.min.js"></script>
    <script src="~/TgScreen/Scripts/jspc.js?121122112"></script>
    <script src="~/TgScreen/Scripts/jquery.liMarquee.js"></script>
    <script src="~/TgScreen/Scripts/jquery.cxselect.min.js"></script>
    <script src="~/TgScreen/Scripts/common1.0.js"></script>
    <script src="~/TgScreen/Scripts/TweenLite.min.js"></script>
    <script src="~/TgScreen/layuiadmin/layui/layui.js"></script>
    <link href="~/TgScreen/layuiadmin/layui/css/layui.css" rel="stylesheet" />
    <link href="~/TgScreen/layuiadmin/style/admin.css" rel="stylesheet" />
    <link href="~/TgScreen/layuiadmin/style/template.css" rel="stylesheet" />
    <style>
        @@charset "utf-8";

        * {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box
        }

        *, body {
            padding: 0px;
            margin: 0px;
            color: #222;
            font-family: "微软雅黑";
        }

        body {
            color: #666;
            font-size: 16px;
        }

        li {
            list-style-type: none;
        }

        table {
        }

        i {
            margin: 0px;
            padding: 0px;
            text-indent: 0px;
        }

        img {
            border: none;
            max-width: 100%;
        }

        a {
            text-decoration: none;
            color: #399bff;
        }

            a.active, a:focus {
                outline: none !important;
                text-decoration: none;
            }

        ol, ul, p, h1, h2, h3, h4, h5, h6 {
            padding: 0;
            margin: 0
        }

        a:hover {
            color: #06c;
            text-decoration: none !important
        }


        .clearfix:after, .clearfix:before {
            display: table;
            content: " ";
            
        }

        .clearfix:after {
            clear: both
        }

        .pulll_left {
            float: left;
        }

        .pulll_right {
            float: right;
        }


        .loading {
            position: fixed;
            left: 0;
            top: 0;
            font-size: 16px;
            z-index: 100000000;
            width: 100%;
            height: 100%;
            background: #1a1a1c;
            text-align: center;
        }

        .loadbox {
            position: absolute;
            width: 160px;
            height: 150px;
            color: rgba(255,255,255,.6);
            left: 50%;
            top: 50%;
            margin-top: -100px;
            margin-left: -75px;
        }

            .loadbox img {
                margin: 10px auto;
                display: block;
                width: 40px;
            }

        .head {
            height: 105px;
            position: relative
        }

            .head h1 {
                color: #fff;
                text-align: center;
                font-size: 42px;
                line-height: 90px;
                ;
            }

                .head h1 img {
                    width: 1.5rem;
                    display: inline-block;
                    vertical-align: middle;
                    margin-right: .2rem
                }

        .weather {
            position: absolute;
            right: 30px;
            top: 0;
            line-height: 70px;
        }

            .weather span {
                color: rgba(255,255,255,.9) !important;
                font-size: 24px;
            }

        .mainbox {
            padding: 10px 20px 0 20px;
            margin:0 auto;
        }

            .mainbox > ul {
                margin-left: -.4rem;
                margin-right: -.4rem;
            }

                .mainbox > ul > li {
                    float: left;
                    padding: 0 .4rem
                }

                .mainbox > ul > li {
                    width: 22%
                }

                    .mainbox > ul > li:nth-child(2) {
                        width: 52%
                    }

        .mainbox1 {
            padding: 10px 20px 0 20px;
        }

            .mainbox1 > ul {
                margin-left: -.4rem;
                margin-right: -.4rem;
            }

                .mainbox1 > ul > li {
                    float: left;
                    padding: 0 .4rem
                }

                .mainbox1 > ul > li {
                    width: 24%
                }

        .boxall {
            padding: 15px;
            background: rgba(0,0,0,.2);
            position: relative;
            margin-bottom: 15px;
            ;
            z-index: 10;
        }

        .alltitle {
            font-size: 18px;
            color: #fff;
            position: relative;
            padding-left: 12px;
            margin-bottom: 10px;
        }

            .alltitle:before {
                width: 5px;
                height: 20px;
                top: 2px;
                position: absolute;
                content: "";
                background: #49bcf7;
                border-radius: 20px;
                left: 0;
            }

        .navboxall {
            height: calc(100% - 30px);
        }

        .num, .zhibiao {
            height: 100%;
            width: 50%;
        }

        .zb1, .zb2, .zb3, .zb4 {
            float: left;
            width: 33.3333%;
            height: 100%;
        }

        #zb1, #zb2, #zb3, #zb4 {
            height: calc(100% - 30px);
        }

        .zhibiao span {
            padding-top: 20px;
            display: block;
            text-align: center;
            color: #fff;
            font-size: 16px;
        }

        .num {
            padding-right: 20px;
        }

        .numbt {
            font-size: 24px;
            color: #fff;
            padding-top: 14px;
        }

            .numbt span {
                font-size: 18px;
                padding-left: 10px;
                color: #fff;
            }

        .numtxt {
            color: #fef000;
            font-size: 80px;
            font-family: arial;
            border-top: 1px solid rgba(255,255,255,.1);
            border-bottom: 1px solid rgba(255,255,255,.1);
            padding: 10px 0;
            margin: 18px 0;
            font-weight: bold;
            letter-spacing: 2px;
        }

        .table1 th {
            border-bottom: 1px solid rgba(255,255,255,.2);
            font-size: 16px;
            color: rgba(255,255,255,.6);
            font-weight: normal;
            padding: 0 0 10px 0;
        }

        .table1 td {
            font-size: 16px;
            color: rgba(255,255,255,.4);
            padding: 15px 0 0 0;
        }

        .table1 span {
            width: 24px;
            height: 24px;
            border-radius: 3px;
            display: block;
            background: #878787;
            color: #fff;
            line-height: 24px;
            text-align: center;
        }

        .table1 tr:nth-child(2) span {
            background: #ed405d
        }

        .table1 tr:nth-child(3) span {
            background: #f78c44
        }

        .table1 tr:nth-child(4) span {
            background: #49bcf7
        }

        .iconchart li {
            height: 30px;
        }

        .iconchart label {
            color: #fff;
            line-height: 30px;
            height: 30px;
            display: inline-block;
            opacity: .8;
        }

            .iconchart label img {
                display: inline-block;
                vertical-align: middle;
                opacity: .4;
            }

        .iconchart .bar {
            display: inline-block;
            background: rgba(255,255,255,.1);
            border: 1px solid rgba(255,255,255,.2);
            width: 78%;
            height: 20px;
            padding: 2px;
            position: relative;
            top: 5px;
        }

            .iconchart .bar span {
                background: linear-gradient(to right, #588fab, #5ea99c);
                display: block;
                width: 60%;
                height: 100%;
                animation: myfirst2 1s ease;
            }

            .iconchart .bar i {
                position: absolute;
                opacity: .5;
                right: -36px;
                color: #fff;
                line-height: 20px;
                top: 0;
            }
        /*Plugin CSS*/
        .wrap {
            height: 82%;
            overflow: hidden;
        }

            .wrap li {
                line-height: 40px;
                height: 40px;
            }

                .wrap li p, .wraptit {
                    font-size: 0;
                }

                    .wrap li span, .wraptit span {
                        display: inline-block;
                        font-size: 18px;
                        color: rgba(255,255,255,.6);
                    }

        .wraptit {
            border-bottom: 1px solid rgba(255,255,255,.2);
            padding: 0 0 10px 0;
            margin-bottom: 10px;
        }

            .wrap li span:nth-child(1), .wraptit span:nth-child(1) {
                width: 30%
            }

            .wrap li span:nth-child(2), .wraptit span:nth-child(2) {
                width: 20%
            }

            .wrap li span:nth-child(3), .wraptit span:nth-child(3) {
                width: 20%
            }

            .wrap li span:nth-child(4), .wraptit span:nth-child(4) {
                width: 30%
            }

        .str_wrap {
            overflow: hidden;
            width: 100%;
            position: relative;
            -moz-user-select: none;
            -khtml-user-select: none;
            user-select: none;
            white-space: nowrap;
        }


        .str_move {
            white-space: nowrap;
            position: absolute;
            top: 0;
            left: 0;
            cursor: move;
        }

        .str_move_clone {
            display: inline-block;
            vertical-align: top;
            position: absolute;
            left: 100%;
            top: 0;
        }

        .str_vertical .str_move_clone {
            left: 0;
            top: 100%;
        }

        .str_down .str_move_clone {
            left: 0;
            bottom: 100%;
        }

        .str_vertical .str_move,
        .str_down .str_move {
            white-space: normal;
            width: 100%;
        }

        .str_static .str_move,
        .no_drag .str_move,
        .noStop .str_move {
            cursor: inherit;
        }

        .str_wrap img {
            max-width: none !important;
        }

        @@keyframes myfirst2 {
            from {
                width: 0
            }

            to {
            }
        }


        canvas {
            position: absolute;
        }
    </style>
</head>
<body>
    <div style="background:#000d4a url(../../Files/bg.jpg) center top;">
        <div class="back"></div>
        <div class="mainbox">
            <ul class="clearfix">
                <li>
                    <div class="boxall" style="height:475px">
                        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
                            <ul class="layui-tab-title">
                                <li class="layui-this" style="color: white; font-size: 20px">今日最佳</li>
                                <li style="color: white; font-size: 20px">本月最佳</li>
                            </ul>
                            <div class="layui-tab-content">
                                <div class="layui-tab-item layui-show">
                                    <table class="table1" width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tbody id="dyn_tr0">
                                            @{
                                                int sort = 0;
                                                foreach (var item in listToday)
                                                {
                                                    sort++;
                                                    <tr>
                                                        <td style="font-size: 20px; color: #ffffff ">@(DoMySql.FindEntity<ModelDb.user_base>($"user_sn='{item.zb_user_sn}'").username)</td>
                                                        <td style="font-weight: bold; font-size: 20px; color: #fef000 ">@(item.new_num)</td>
                                                        <td><span style="font-weight: bold; font-size: 20px; color: #00ff21 ">@sort</span></td>
                                                    </tr>
                                                }
                                                sort = 0;
                                            }


                                        </tbody>
                                    </table>
                                </div>
                                <div class="layui-tab-item">
                                    <table class="table1" width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tbody id="dyn_tr0">
                                            @{

                                                foreach (var item in listMonth)
                                                { 
                                                    sort++;
                                                    <tr>
                                                        <td style="font-size: 20px; color: #ffffff ">@(DoMySql.FindEntity<ModelDb.user_base>($"user_sn='{item.zb_user_sn}'").username)</td>
                                                        <td style="font-weight: bold; font-size: 20px; color: #fef000 ">@item.new_num_sum</td>
                                                        <td><span style="font-weight: bold; font-size: 20px; color: #00ff21 ">@sort</span></td>
                                                    </tr>
                                                }

                                            }

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li style="width:55%">
                    <div class="boxall" style="height:230px">
                        <div class="clearfix navboxall" style="height: 100%">
                            <div class="pulll_left num">
                                <div class="numbt">本月业绩目标<span>(单位/元)</span></div>
                                <div class="numtxt" id="plan_amount_t">0</div>
                            </div>
                            <div class="pulll_right num">
                                <div class="numbt">本月业绩完成<span>(单位/元)</span></div>
                                <div class="numtxt" id="real_amount_t">0</div>
                            </div>
                        </div>
                    </div>
                    <div class="boxall" style="height:230px">
                        <div class="clearfix navboxall" style="height: 100%">
                            <div class="pulll_left num">
                                <div class="numbt">今日实时业绩<span>(单位/元)</span></div>
                                <div class="numtxt" id="real_amount_d">0</div>
                            </div>
                            <div class="pulll_right zhibiao">
                                <div class="zb2">
                                    <span>剩余天数</span>
                                    <div id="zb2"></div>
                                </div>
                                <div class="zb3"><span>实际进度</span><div id="zb3"></div></div>
                                <div class="zb4">
                                    <span>理论进度</span>
                                    <div id="zb4"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="boxall" style="height:475px">
                        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">
                            <ul class="layui-tab-title">
                                <li class="layui-this" style="color: white; font-size: 20px">今日最佳</li>
                                <li style="color: white; font-size: 20px">本月最佳</li>

                            </ul>
                            <div class="layui-tab-content">
                                <div class="layui-tab-item layui-show">
                                    <table class="table1" width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tbody id="dyn_tr0">
                                            @{
                                                sort = 0;
                                                foreach (var item in listToday)
                                                {
                                                    sort++;
                                                    <tr>
                                                        <td style="font-size: 20px; color: #ffffff ">@(DoMySql.FindEntity<ModelDb.user_base>($"user_sn='{item.zb_user_sn}'").username)</td>
                                                        <td style="font-weight: bold; font-size: 20px; color: #fef000 ">@(item.amount)</td>
                                                        <td><span style="font-weight: bold; font-size: 20px; color: #00ff21 ">@sort</span></td>
                                                    </tr>
                                                }
                                                sort = 0;
                                            }

                                        </tbody>
                                    </table>
                                </div>
                                <div class="layui-tab-item">
                                    <table class="table1" width="100%" border="0" cellspacing="0" cellpadding="0">
                                        <tbody id="dyn_tr0">
                                            @{

                                                foreach (var item in listMonth)
                                                {
                                                    sort++;
                                                    <tr>
                                                        <td style="font-size: 20px; color: #ffffff ">@(DoMySql.FindEntity<ModelDb.user_base>($"user_sn='{item.zb_user_sn}'").username)</td>
                                                        <td style="font-weight: bold; font-size: 20px; color: #fef000 ">@item.amount_sum</td>
                                                        <td><span style="font-weight: bold; font-size: 20px; color: #00ff21 ">@sort</span></td>
                                                    </tr>
                                                }

                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>

        <div class="mainbox1">
            <ul class="clearfix">
                <li>
                    <div class="boxall" style="height:350px;">
                        <div class="alltitle">0</div>
                        <div class="navboxall">
                            <div class="wraptit">
                                <span>人员</span><span style="width: 150px;">销售</span><span>排名</span>
                            </div>
                            <div class="wrap">
                                <ul id="dyn_ul">
                                    <li>
                                        <span>0</span>
                                        <span style="width: 150px; font-weight: bold; font-size: 22px; color: #fef000 ">0</span>
                                        <span style="font-weight: bold; font-size: 22px; color: #00ff21 ">0</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <script>
        layui.use('element', function () {
            var element = layui.element;
        });
    </script>
</body>
</html>
